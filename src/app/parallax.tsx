"use client"

import React from "react"
import gsap from "gsap"
import { useGSAP } from "@gsap/react"
import { ScrollTrigger } from "gsap/dist/ScrollTrigger"

import HeroParallax from "../../public/parallax.svg"

gsap.registerPlugin(ScrollTrigger)

export function Parallax() {
  const videoRef = React.useRef<HTMLVideoElement>(null)

  useGSAP(() => {
    if (typeof window === "undefined") return

    const scrollTimeline = gsap.timeline({
      scrollTrigger: {
        trigger: "#bg_hero",
        start: "top top",
        end: "bottom top",
        scrub: 1,
        markers: true,
      },
    })

    // Example background animations.
    scrollTimeline
      .to("#mountains", { y: -80 }, 0)
      .to("#forest", { y: -50 }, 0)
      .to("#ground", { y: 300 }, 0)
      .to("#person", { y: 100 }, 0)
    // Updated video animation using videoRef.current
    if (videoRef.current) {
      scrollTimeline.fromTo(videoRef.current, { y: 200 }, { y: 0 }, 0)
    }
  })

  return (
    <div id="bg_hero" className="h-screen relative w-full overflow-hidden">
      <video
        ref={videoRef}
        className="right-0 absolute scale-150"
        style={{
          clipPath:
            "path('M211 156C214.014 156.165 217.028 156.326 220.043 156.481C221.846 156.575 223.649 156.675 225.452 156.783C226.258 156.826 227.064 156.869 227.895 156.914C228.594 156.955 229.294 156.996 230.015 157.038C232.016 157.097 232.016 157.097 233.882 156.38C236 156 236 156 238.752 156.939C241.989 157.996 244.7 158.376 248.087 158.594C249.27 158.674 250.453 158.754 251.671 158.837C252.94 158.914 254.209 158.991 255.516 159.07C256.854 159.157 258.193 159.244 259.531 159.331C262.338 159.512 265.146 159.688 267.953 159.86C271.497 160.077 275.04 160.306 278.583 160.539C293.057 161.487 307.489 162.339 322 162C322 162.66 322 163.32 322 164C322.788 163.99 323.576 163.981 324.388 163.971C332.292 163.916 340.093 164.243 347.973 164.84C349.777 164.97 349.777 164.97 351.617 165.102C356.686 165.466 361.754 165.841 366.822 166.216C395.492 168.44 395.492 168.44 424.229 168.947C427 169 427 169 429 170C430.942 170.206 432.89 170.357 434.839 170.481C436.677 170.601 436.677 170.601 438.551 170.723C439.895 170.807 441.239 170.89 442.582 170.973C443.958 171.061 445.333 171.149 446.708 171.238C449.594 171.423 452.48 171.605 455.366 171.785C459.058 172.015 462.75 172.25 466.442 172.487C469.284 172.67 472.126 172.85 474.968 173.03C476.329 173.117 477.69 173.203 479.051 173.29C480.958 173.411 482.865 173.53 484.773 173.649C485.857 173.717 486.942 173.785 488.059 173.855C493.064 174.22 493.064 174.22 497.938 173.375C500 173 500 173 502.57 173.928C506.738 175.231 510.608 175.516 514.948 175.772C515.839 175.831 516.729 175.89 517.646 175.951C520.623 176.145 523.601 176.329 526.579 176.512C528.716 176.65 530.853 176.788 532.991 176.927C538.794 177.302 544.599 177.667 550.403 178.03C556.484 178.412 562.565 178.802 568.646 179.191C578.866 179.844 589.086 180.49 599.306 181.132C611.101 181.874 622.895 182.624 634.689 183.379C646.05 184.106 657.411 184.828 668.773 185.547C673.599 185.853 678.425 186.16 683.251 186.468C688.946 186.832 694.642 187.191 700.338 187.547C702.421 187.678 704.503 187.81 706.586 187.944C716.186 188.559 725.733 189.168 735.356 189.001C745.992 188.996 745.992 188.996 750 191C751.683 191.174 753.37 191.298 755.059 191.395C756.086 191.464 757.112 191.533 758.17 191.604C760.313 191.741 762.456 191.869 764.6 191.986C776.185 192.799 784.781 195.713 793 204C793.967 204.913 793.967 204.913 794.953 205.844C799.514 210.225 803.494 214.953 807.449 219.879C810.377 223.497 813.44 226.995 816.5 230.5C821.79 236.572 826.941 242.735 832 249C833.531 250.885 835.063 252.768 836.594 254.651C838.265 256.705 839.933 258.761 841.602 260.817C843.843 263.577 846.088 266.335 848.336 269.09C849.433 270.435 850.529 271.78 851.625 273.125C852.165 273.787 852.705 274.449 853.26 275.131C855.832 278.294 858.38 281.471 860.875 284.695C861.34 285.295 861.804 285.894 862.283 286.511C863.519 288.113 864.748 289.72 865.977 291.328C873.562 300.807 882.281 309.42 890.891 317.953C891.89 318.948 892.889 319.943 893.887 320.938C897.005 324.045 900.128 327.148 903.25 330.25C906.891 333.867 910.53 337.485 914.164 341.108C915.599 342.537 917.038 343.962 918.476 345.388C923.533 350.426 928.383 355.556 933 361C936.308 364.849 938.662 367.103 943.625 368.563C947.893 369.823 949.77 370.969 952 375C952.343 376.477 952.675 377.957 953 379.438C954.999 386.779 960.378 391.83 965.419 397.288C966.908 398.9 968.375 400.528 969.836 402.164C973.784 406.562 977.807 410.834 982 415C982.551 415.574 983.101 416.147 983.668 416.738C987.678 420.892 991.997 424.467 996.524 428.043C1003.12 433.258 1008.49 438.556 1013.63 445.254C1015.53 447.455 1017.23 449.067 1019.47 450.871C1023.18 453.969 1025.54 457.37 1028 461.5C1028.43 462.199 1028.86 462.899 1029.31 463.619C1031.95 467.98 1034.12 472.396 1036.19 477.063C1039.82 484.666 1045.38 489.711 1051.39 495.488C1063.31 506.963 1067.99 519.599 1068.39 535.895C1068.42 537.909 1068.45 539.923 1068.48 541.938C1068.69 549.414 1070.2 554.162 1075 560C1076.5 564.486 1076.46 568.986 1076.69 573.688C1076.75 574.656 1076.81 575.625 1076.87 576.623C1077.29 585.143 1075.65 591.692 1072.63 599.688C1072.23 600.764 1071.83 601.84 1071.41 602.949C1069.13 607.873 1067.11 610.777 1062.01 612.774C1060.39 613.325 1058.76 613.858 1057.13 614.375C1056.26 614.663 1055.39 614.951 1054.5 615.248C1051.67 616.183 1048.84 617.092 1046 618C1043.95 618.668 1041.91 619.336 1039.86 620.004C1036.01 621.251 1032.16 622.494 1028.3 623.715C1027.13 624.088 1027.13 624.088 1025.93 624.469C1024 625 1024 625 1022 625C1021.73 625.735 1021.47 626.47 1021.2 627.227C1015.96 639.369 1004.79 647.075 993 652C975.682 658.096 960.027 659.444 943 652C942.243 651.472 941.485 650.944 940.704 650.4C937.309 648.642 935.348 648.832 931.567 649.219C930.331 649.337 929.095 649.456 927.821 649.578C925.93 649.787 925.93 649.787 924 650C922.828 650.119 921.656 650.237 920.449 650.359C916.943 650.721 913.44 651.107 909.938 651.5C900.967 652.504 892.006 653.381 883 654C881.917 654.078 881.917 654.078 880.812 654.157C879.168 654.262 877.521 654.321 875.875 654.375C874.821 654.424 873.766 654.473 872.68 654.524C870 654 870 654 868.133 651.477C867.759 650.659 867.385 649.842 867 649C866.914 649.788 866.828 650.575 866.739 651.387C864.679 667.354 858.637 682.533 846 693C833.752 701.887 815.332 709.085 800 707C782.367 703.859 767.977 695.866 757.188 681.125C750.32 670.545 746.635 660.214 744 648C743.34 648 742.68 648 742 648C732.411 647.47 722.965 646.249 713.466 644.902C699.002 642.86 684.571 641.073 670 640C668.889 639.917 667.777 639.833 666.632 639.747C661.874 639.391 657.116 639.035 652.357 638.697C651.285 638.62 650.214 638.544 649.11 638.465C648.171 638.399 647.232 638.333 646.265 638.266C644.529 638.124 642.794 637.977 641.063 637.787C633.758 636.987 626.437 636.595 619.1 636.213C605.408 635.497 591.721 634.694 578.038 633.811C577.237 633.759 576.436 633.708 575.61 633.654C570.586 633.33 565.561 633.003 560.537 632.675C556.013 632.38 551.489 632.087 546.965 631.794C538.408 631.24 529.851 630.683 521.293 630.126C511.714 629.503 502.135 628.882 492.555 628.26C471.433 626.891 450.312 625.517 429.19 624.143C427.091 624.006 424.993 623.869 422.894 623.733C415.125 623.227 407.355 622.721 399.586 622.215C398.694 622.157 397.802 622.099 396.883 622.039C394.428 621.879 391.973 621.719 389.517 621.558C388.783 621.511 388.049 621.463 387.292 621.414C383.775 621.184 380.258 620.951 376.742 620.71C376.061 620.664 375.38 620.618 374.679 620.57C372.855 620.446 371.031 620.32 369.208 620.194C356.781 619.428 356.781 619.428 345 623C338.855 623.512 335.969 623 331 619C330.67 618.67 330.34 618.34 330 618C327.019 617.696 324.055 617.451 321.067 617.246C320.16 617.181 319.252 617.116 318.318 617.049C316.389 616.911 314.459 616.776 312.53 616.643C309.606 616.441 306.683 616.23 303.76 616.018C301.883 615.885 300.006 615.753 298.129 615.621C297.265 615.559 296.401 615.496 295.511 615.432C289.666 615.035 283.858 614.93 278 615C277.781 616.016 277.562 617.032 277.336 618.078C273.695 634.203 267.312 647.829 253.348 657.629C238.039 666.57 220.824 670.589 203.309 667.309C187.102 662.736 173.601 651.413 164.84 637.106C163.739 635.001 163 633.399 163 631C162.467 631.266 161.933 631.531 161.383 631.805C155.767 634.467 150.218 636.371 144 637C143.67 636.67 143.34 636.34 143 636C143.22 626.655 144.79 617.263 146 608C143.69 608 141.38 608 139 608C138.67 607.01 138.34 606.02 138 605C136.696 604.933 136.696 604.933 135.365 604.864C116.387 603.878 97.4135 602.811 78.4453 601.636C76.3257 601.504 74.2061 601.374 72.0864 601.244C69.0836 601.06 66.0809 600.872 63.0784 600.684C62.1922 600.63 61.306 600.575 60.393 600.52C43.0202 599.414 43.0202 599.414 40.0002 596C40.0002 595.01 40.0002 594.02 40.0002 593C38.9896 593.062 37.979 593.124 36.9377 593.188C32.604 593.188 28.4329 592.494 24.1877 591.688C22.9025 591.444 21.6173 591.2 20.2932 590.949C15.7649 589.644 15.7649 589.644 14.0002 587C13.3049 584.871 13.3049 584.871 12.8752 582.438C12.7283 581.653 12.5813 580.868 12.4299 580.059C12.069 577.49 11.8051 574.946 11.5705 572.363C11.03 566.761 10.0277 561.281 9.00023 555.75C6.81803 543.466 5.795 531.786 6.31273 519.313C6.34714 518.438 6.38154 517.563 6.41698 516.661C6.46121 515.841 6.50544 515.021 6.55102 514.176C6.5888 513.443 6.62659 512.71 6.66552 511.954C7.00023 510 7.00023 510 9.00023 507C9.66023 507 10.3202 507 11.0002 507C10.9251 506.285 10.8499 505.571 10.7725 504.835C8.57764 483.291 7.38981 461.715 6.41292 440.088C6.31349 437.892 6.21257 435.696 6.11141 433.499C5.17097 412.968 4.59059 392.598 5.75023 372.063C5.79314 371.297 5.83604 370.53 5.88024 369.741C8.6041 322.341 17.5769 276.145 31.8127 230.875C32.0433 230.141 32.274 229.408 32.5116 228.652C41.0306 201.711 41.0306 201.711 48.7502 197.5C49.8227 197.005 50.8952 196.51 52.0002 196C53.3251 195.092 54.6391 194.169 55.9455 193.234C61.3652 189.592 67.0758 187.161 73.1252 184.75C74.2932 184.281 75.4612 183.812 76.6645 183.329C106.651 171.516 137.767 163.316 169.445 157.477C171.564 157.081 173.678 156.652 175.789 156.215C187.406 154.081 199.283 155.334 211 156Z')",
        }}
        playsInline
        webkit-playsinline="true"
        preload="metadata"
        muted
      >
        <source src="/kingsize.mp4" type="video/mp4" />
      </video>

      <HeroParallax className="w-full" />
    </div>
  )
}
